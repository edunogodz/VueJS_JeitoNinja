<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>VUeJS do Jeito Ninja</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" > -->

	</head>
<body>
	<div id="app">
		<br><br><br><br><br>
		
		<div class="container">
			<input-form></input-form>
			
			<br>

			<my-list></my-list>
		</div>

		<br>

		
	</div>
	
	<template id="form">
		<div class="card">
			<div class="card-block">
				<div class="form-group">
					<label for="">Titulo</label>
					<input 	v-model="title" 
							type="text" class="form-control">
				</div>
				<button @click.stop.prevent="submit()" 
						class="btn btn-primary">ENVIAR</button>								
			</div>
		</div>
	</template>

	<template id="list">
		<ul class="list-group">
			<li v-for="item in list"
				class="list-group-item">{{ item.title }}</li>
			
		</ul>
	</template>
	</template>
	
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>

	<script>
		
		Vue.component('input-form',{
			template: '#form',
			data(){
				return{
					title:'',
				}
			},
			methods: {
				submit(){
					//eventBus.$emit('submit',this.title);
					this.$eventHub.$emit('submit',this.title);
					//console.log('here');
				}
			}
		});

		Vue.component('my-list',{
			template: '#list',
			created(){
				var vm=this;
				//eventBus.$on('submit',function(title){
				this.$eventHub.$on('submit',function(title){
					if(title) {
						vm.list.push({ title: title });
					}
				});
			},

			data() {
				return {
					list: [
						{ title: "Ir a feira" },
					]
				}
			},
		});		

		//var eventBus = new Vue();
		Vue.prototype.$eventHub = new Vue();

		var app = new Vue({
			el: "#app",

			data: {
				titulo: "Vuejs do Jeito Ninja!"						
			}			
		});
	</script>

</body>
</html>